<!DOCTYPE html>
<html>
<head>
    <script language="JavaScript">
        "use strict";
        function makeCorrAccB() {
            let mode=document.getElementById('checkDigitModeId').checked;
            if (mode) {
                let inf="1-checked";
            } else {
                let inf="2-unchecked";
            }
            document.getElementById('demo').innerHTML =inf;
        }

        function makeRandom(fieldId,maxNum) {
            let maxI="1"+"0".repeat(maxNum);
            let genKey=Math.floor(Math.random() * maxI).toString();
            if(genKey.length<maxNum) {
             genKey="0".repeat(maxNum-genKey.length)+genKey;
            }
            document.getElementById(fieldId).value = genKey;
        }

        function makeCorrAcc() {
            let bik=document.getElementById("ABikId").value;
            let prefix=document.getElementById("APrefixId").value;
            let currency=document.getElementById("AmoneyId").value;
            let bankDep=document.getElementById("AbankDepId").value;
            let clientNum=document.getElementById("AclientNumId").value;

            //bik="049805000"; => 005
            let bik2="0"+bik.substring(4,6);
            let corrA=bik2+prefix+currency+"0"+bankDep+clientNum
            //https://keysystems.ru/files/fo/arm_budjet/show_docum/BKS/onlinehelp/index.html?ro_kr_algor_klyuch_korr_schet.htm
            //Коррсчет 30101810900000000746 .  Счет открыт в РКЦ, имеющем БИК 049805000.
            //БИК=049805000 преф=30101 банк=0000 счет=0000746
            //Контрольное число: 153 mod 10 = 3.
            let base_713=new Array(7,1,3);
            console.log("corrA("+corrA.length+")=!"+corrA+"!")
            console.log("base713:",base_713[0],base_713[1],base_713[2])
        }
    </script>
</head>
<body>
<h1>Генератор/валидатор номера счета для физических лиц</h1>
<h2>Генератор номера счета</h2>

1. <label for="ABikId">Выберите банк (БИК)</label>
<select name="Bik" id="ABikId">
    <option value="044525491">044525491: КУ ООО ПИР Банк - ГК АСВ</option>
    <option value="044525225">044525225: ПАО Сбербанк — Москва</option>
    <option value="044525187">044525187: Банк ВТБ (ПАО) — Москва</option>
    <option value="044525555">044525555: ПАО "Промсвязьбанк" — Москва</option>
    <option value="049805000">049805000: Тестовый-БИК</option>

</select>
<br>

2. <label for="APrefixId">Префикс счета</label>
<select name="Prefix" id="APrefixId">
    <option value="30101">30101 Межбанковские расчеты/счет организации в Банке России</option>
    <option value="30102">30102 Межбанковские расчеты/Корреспондентские счета кредитных организаций в Банке России</option>
    <option value="40802">40802 Прочие счета/Индивидуальные предприниматели</option>
    <option value="40817" selected="selected">40817 Прочие счета/Физические лица</option>
    <option value="40701">40701 Счета негосударственных организаций/Финансовые организации</option>
    <option value="40702">40702 Счета негосударственных организаций/Коммерческие организации</option>
</select>

<br>
3. <label for="AmoneyId">Выберите валюту счета:</label>
<select name="money" id="AmoneyId">
    <option value="810">810-Рубли, RUB</option>
    <option value="840">840-Доллары США, USD</option>
    <option value="978">978-Евро, EUR</option>
    <option value="156">156-китайские юани</option>
</select>

<br>
4. Выберите идентификатор банка (или его филиала), 4 цифры
<input type="text" id="AbankDepId" name="bankDep" maxlength="4">
<input type="button" value="случайный номер" onclick="makeRandom('AbankDepId',4)">

<br>
5. Выберите порядковый номер лицевого счета, 7 цифр
<input type="text" id="AclientNumId" name="clientNum" maxlength="7">
<input type="button" value="случайный номер" onclick="makeRandom('AclientNumId',7)">

<br>
<input type="button" value="расчитать" onclick="makeCorrAcc()">
<div id="Aresult">вычислить номер счета</div>

<hr width="80%" align="right"/>
<h2>Валидатор номера счета</h2>

<hr width="80%" align="right"/>
<h2>Дополнительная информация</h2>
<ul>
    <li><a href="https://www.iban.ru/proverka-scheta">www.iban.ru/proverka-scheta</a>
        БИК, номер счета с разбивкой на счета I и II порядка</li>
    <li>структура счета в части I и II порядка
        <ul>
            <li><a href="https://www.consultant.ru/document/cons_doc_LAW_3759/550b06d788cd5cb26dd9f4c0bb8a43ccb723f065/">
                https://www.consultant.ru/document/cons_doc_LAW_3759/550b06d788cd5cb26dd9f4c0bb8a43ccb723f065/</a></li>
            <li><a href="https://docs.cntd.ru/document/1300260896">
                https://docs.cntd.ru/document/1300260896</a></li>
        </ul>
    </li>

</ul>
<hr width="80%" align="right"/>
<img src="cross-axe-logo.png"/>
<!--
<label for="controlId">Контрольная цифра:</label>
<select name="control" id="controlId">
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
</select>
<input id="checkDigitModeId" type="checkbox" name="режим"
          value="xmode"> Режим проверки контрольной цифры(если выключен - режим генерации)
<br>
-->

</body>
</html>